## ????????? DDD ???Angular v20 ???

### 1. ???????
- **??**??????????????????????????????????????????
- **??**????????????????????????????????????????
- **???**????????????????????? CRM ???

### 2. ????
- ???????????????????????????????????????? = ??????
- ????????????????????????????????????????????????
- ?????????????????????????????????
- ??????? `?? Draft`?`??? PendingAssignment`?`??? InProgress`?`??? Completed`?`??? Cancelled`???/??????????????
- ?????????/???????????????????

### 3. ??????Bounded Contexts?
1. **???? TaskManagement BC**????????????????????????
2. **????? Assignment BC**??????????????????????????????
3. **?? Notification BC**??????????????????????????

> ???? Assignment ? Notification ????????????????????????

### 4. ?????Ubiquitous Language?
- **?? Task**???????????????
- **??? SubTask**?????????????????????
- **???? CompositeTask**??????????????
- **???? SplitPlan**?????????????????????????
- **???? MergePlan**?????????????????????
- **?? Reward**?????????????????????
- **?? LifecycleStatus**???????????

### 5. ???????

#### 5.1 ????
- **Task ??**?Aggregate Root?
  - `Task`??????????????????????/?????
  - `ChildTaskRef`??????????? ID ???????
  - `ParentTaskRef`??????????? ID ?????????????
  - `SplitPlan`???????????????????
  - `MergePlan`???????????????????
  - `Reward`??????`amount`?Decimal??`currency`?

- **Assignment ??**??? BC???????
  - `Assignment`??????????????????

#### 5.2 ??????
- `TaskId`?`PlanId`?UUID?
- `Reward`?????? 0?????/???
- `LifecycleStatus`?`Draft`?`PendingAssignment`?`InProgress`?`Completed`?`Cancelled`?`Merged`?
- `SplitStatus`?`Planned`?`Confirmed`?`Cancelled`?

#### 5.3 ??????
- ??????????????????
- ?????????????????????
- ???????????????????????
- ??????`Draft`/`PendingAssignment`??????????????
- ?????????????????? `Merged`???????????

### 6. ?????????

#### 6.1 ????
- `SplitValidator`?????????????????
- `MergeCalculator`????????????????????????
- `RewardAllocator`???????????????

#### 6.2 ?????Application Services?
- `CreateTaskService`
- `SplitTaskService`
- `CancelSplitService`
- `MergeTasksService`
- `CancelMergeService`
- `UpdateTaskStatusService`

????????
1. ??????Repository?
2. ?????Command DTO?
3. ????????????
4. ????????????

### 7. ??????

#### 7.1 ?????SplitTask?
1. ???? Angular ?????????
2. ???? `SplitTaskCommand` ? API??? `taskId`??????? `assignee`?`reward`?`notes`?
3. ????????????????
4. ??????? IDs ? `SplitPlan`????????? `PendingAssignment`?
5. ?? `TaskSplitPlanned` ???
6. Assignment BC ????????????????

#### 7.2 ?????CancelSplit?
- ?????????? `InProgress`?
- ????????????? `SplitPlan`?????????????? `TaskSplitCancelled`?

#### 7.3 ?????MergeTasks?
1. ??????????? `MergeTasksCommand`?
2. ?????????????????`Draft`/`PendingAssignment`??
3. ??? `Task` ?????????????
4. ?? `MergePlan`???????? `Merged` ????
5. ?? `TasksMerged` ?????????????????????

#### 7.4 ?????CancelMerge?
- ??????????????
- ????? `MergePlan`?????????????????

### 8. ?????????
- `TaskCreated`
- `TaskSplitPlanned`
- `TaskSplitCancelled`
- `TaskStatusChanged`
- `TasksMerged`
- `TaskMergeCancelled`

Assignment BC ???????????Notification BC ?????????????????????????Kafka / RabbitMQ????????????? + ????????????

### 9. ????????
- ??????PostgreSQL?????? JSONB ????
- ????
  - `tasks`??????
  - `task_split_plans`?`task_split_items`????????????
  - `task_merge_plans`?`task_merge_items`?
  - `task_events`?Event Sourcing ????
- ?? Repository ???? Domain ? ORM?? TypeORM / Prisma??
- ????????????????? ACID?

### 10. ???????

```
???????????????
? Presentation?  Angular v20 (Standalone Components, Signals, NgRx)
???????????????
? Application ?  NestJS / Node.js Services, DTO, Command Handler
???????????????
? Domain      ?  ??????????????
???????????????
? Infrastructure ?  Repository?ORM??????
???????????????
```

- **??**?Angular v20?Standalone Components?Angular Signals?NgRx Store (? NgRx Component Store) ???????
- **??**??? NestJS??? Application/Domain/Infrastructure ???
- **??**?REST API?????? GraphQL?
- **????**??????????? Outbox???????????

### 11. Angular v20 ????

#### 11.1 ????
- `app/task-management`?Feature Module?Standalone?
  - Component?`TaskBoardComponent`?`TaskDetailComponent`?`SplitPlannerComponent`?`MergePlannerComponent`?`RewardAllocatorDialog`
  - Routes?
    - `/tasks`?????/??
    - `/tasks/:id`?????
    - `/tasks/:id/split`?????
    - `/merge`???????
- `app/shared/ui`??? UI ?????????????????
- `app/shared/data-access`?API Client?DTO?Adapter?
- `app/shared/state`?NgRx Store?? `TaskState`?`SplitState`?`MergeState`?

#### 11.2 ????
- ?? `@ngrx/store` ???????????/???????
- Effects ???? REST API?????/?????
- ?? Angular Signals?Angular 20?? Component ?????????????????????
- ?????? `Reactive Forms` ???? Validator??????????????????

#### 11.3 API ????
- `GET /api/tasks`????????
- `GET /api/tasks/{id}`????????
- `POST /api/tasks/{id}/split`????????
- `DELETE /api/tasks/{id}/split`??????
- `POST /api/tasks/merge`????????
- `DELETE /api/tasks/{mergeId}`??????

?? API ???? `taskView`?????????????????????????????

#### 11.4 UX ??
- ???????????????????????????????
- ?????
  1. ??????
  2. ???????????????
  3. ?????????????
  4. ????
- ?????
  1. ??????
  2. ??????????
  3. ????????

### 12. ????
- **????**?
  - Domain????????????
  - Application?Command Handler ???? repository ???
- **????**???/?? API????????????
- **???**??? Cypress ?????????????

### 13. ?????
- **???**???/???????????????????
- **????**?? OpenTelemetry ??????????????????
- **???**???????????????????????
- **???**???????????????/????????????

### 14. ??????
1. **MVP**????? CRUD?????????????????Angular ???????
2. **Phase 2**??? Assignment BC?????????
3. **Phase 3**?????????????????????

### 15. ???????
- ????????????????
- Assignment BC ?????? Mock ?????????????
- ??????????????????????????????????????

